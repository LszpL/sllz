!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function o(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function t(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(c," ")),u.json?JSON.parse(e):e}catch(n){}}function r(n,o){var i=u.raw?n:t(n);return e.isFunction(o)?o(i):i}var c=/\+/g,u=e.cookie=function(t,c,s){if(arguments.length>1&&!e.isFunction(c)){if(s=e.extend({},u.defaults,s),"number"==typeof s.expires){var d=s.expires,f=s.expires=new Date;f.setMilliseconds(f.getMilliseconds()+864e5*d)}return document.cookie=[n(t),"=",i(c),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var a=t?void 0:{},p=document.cookie?document.cookie.split("; "):[],l=0,m=p.length;m>l;l++){var x=p[l].split("="),g=o(x.shift()),j=x.join("=");if(t===g){a=r(j,c);break}t||void 0===(j=r(j))||(a[g]=j)}return a};u.defaults={},e.removeCookie=function(n,o){return e.cookie(n,"",e.extend({},o,{expires:-1})),!e.cookie(n)}});
window.url=function(){function r(){return new RegExp(/(.*?)\.?([^\.]*?)\.?(com|net|org|biz|ws|in|me|co\.uk|co|org\.uk|ltd\.uk|plc\.uk|me\.uk|edu|mil|br\.com|cn\.com|eu\.com|hu\.com|no\.com|qc\.com|sa\.com|se\.com|se\.net|us\.com|uy\.com|ac|co\.ac|gv\.ac|or\.ac|ac\.ac|af|am|as|at|ac\.at|co\.at|gv\.at|or\.at|asn\.au|com\.au|edu\.au|org\.au|net\.au|id\.au|be|ac\.be|adm\.br|adv\.br|am\.br|arq\.br|art\.br|bio\.br|cng\.br|cnt\.br|com\.br|ecn\.br|eng\.br|esp\.br|etc\.br|eti\.br|fm\.br|fot\.br|fst\.br|g12\.br|gov\.br|ind\.br|inf\.br|jor\.br|lel\.br|med\.br|mil\.br|net\.br|nom\.br|ntr\.br|odo\.br|org\.br|ppg\.br|pro\.br|psc\.br|psi\.br|rec\.br|slg\.br|tmp\.br|tur\.br|tv\.br|vet\.br|zlg\.br|br|ab\.ca|bc\.ca|mb\.ca|nb\.ca|nf\.ca|ns\.ca|nt\.ca|on\.ca|pe\.ca|qc\.ca|sk\.ca|yk\.ca|ca|cc|ac\.cn|com\.cn|edu\.cn|gov\.cn|org\.cn|bj\.cn|sh\.cn|tj\.cn|cq\.cn|he\.cn|nm\.cn|ln\.cn|jl\.cn|hl\.cn|js\.cn|zj\.cn|ah\.cn|gd\.cn|gx\.cn|hi\.cn|sc\.cn|gz\.cn|yn\.cn|xz\.cn|sn\.cn|gs\.cn|qh\.cn|nx\.cn|xj\.cn|tw\.cn|hk\.cn|mo\.cn|cn|cx|cz|de|dk|fo|com\.ec|tm\.fr|com\.fr|asso\.fr|presse\.fr|fr|gf|gs|co\.il|net\.il|ac\.il|k12\.il|gov\.il|muni\.il|ac\.in|co\.in|org\.in|ernet\.in|gov\.in|net\.in|res\.in|is|it|ac\.jp|co\.jp|go\.jp|or\.jp|ne\.jp|ac\.kr|co\.kr|go\.kr|ne\.kr|nm\.kr|or\.kr|li|lt|lu|asso\.mc|tm\.mc|com\.mm|org\.mm|net\.mm|edu\.mm|gov\.mm|ms|nl|no|nu|pl|ro|org\.ro|store\.ro|tm\.ro|firm\.ro|www\.ro|arts\.ro|rec\.ro|info\.ro|nom\.ro|nt\.ro|se|si|com\.sg|org\.sg|net\.sg|gov\.sg|sk|st|tf|ac\.th|co\.th|go\.th|mi\.th|net\.th|or\.th|tm|to|com\.tr|edu\.tr|gov\.tr|k12\.tr|net\.tr|org\.tr|com\.tw|org\.tw|net\.tw|ac\.uk|uk\.com|uk\.net|gb\.com|gb\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\.hk|org\.hk|net\.hk|edu\.hk|us|tk|cd|by|ad|lv|eu\.lv|bz|es|jp|cl|ag|mobi|eu|co\.nz|org\.nz|net\.nz|maori\.nz|iwi\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\.pt|edu\.pt|asia|fi|com\.ve|net\.ve|fi|org\.ve|web\.ve|info\.ve|co\.ve|tel|im|gr|ru|net\.ru|org\.ru|hr|com\.hr|ly|xyz)$/)}function t(r){return decodeURIComponent(r.replace(/\+/g," "))}function c(r,t){var c=r.charAt(0),o=t.split(c);return c===r?o:(r=parseInt(r.substring(1),10),o[0>r?o.length+r:r-1])}function o(r,c){var o=r.charAt(0),n=c.split("&"),e=[],a={},m=[],i=r.substring(1);for(var u in n)if(n.hasOwnProperty(u)&&(e=n[u].match(/(.*?)=(.*)/),e||(e=[n[u],n[u],""]),""!==e[1].replace(/\s/g,""))){if(e[2]=t(e[2]||""),i===e[1])return e[2];m=e[1].match(/(.*)\[([0-9]+)\]/),m?(a[m[1]]=a[m[1]]||[],a[m[1]][m[2]]=e[2]):a[e[1]]=e[2]}return o===r?a:a[i]}return function(t,n){var e,a={};if("tld?"===t)return r();if(n=n||window.location.toString(),!t)return n;if(t=t.toString(),e=n.match(/^mailto:([^\/].+)/))a.protocol="mailto",a.email=e[1];else{if((e=n.match(/(.*?)#(.*)/))&&(a.hash=e[2],n=e[1]),a.hash&&t.match(/^#/))return o(t,a.hash);if((e=n.match(/(.*?)\?(.*)/))&&(a.query=e[2],n=e[1]),a.query&&t.match(/^\?/))return o(t,a.query);if((e=n.match(/(.*?)\:?\/\/(.*)/))&&(a.protocol=e[1].toLowerCase(),n=e[2]),(e=n.match(/(.*?)(\/.*)/))&&(a.path=e[2],n=e[1]),a.path=(a.path||"").replace(/^([^\/])/,"/$1").replace(/\/$/,""),t.match(/^[\-0-9]+$/)&&(t=t.replace(/^([^\/])/,"/$1")),t.match(/^\//))return c(t,a.path.substring(1));if(e=c("/-1",a.path.substring(1)),e&&(e=e.match(/(.*?)\.(.*)/))&&(a.file=e[0],a.filename=e[1],a.fileext=e[2]),(e=n.match(/(.*)\:([0-9]+)$/))&&(a.port=e[2],n=e[1]),(e=n.match(/(.*?)@(.*)/))&&(a.auth=e[1],n=e[2]),a.auth&&(e=a.auth.match(/(.*)\:(.*)/),a.user=e?e[1]:a.auth,a.pass=e?e[2]:void 0),a.hostname=n.toLowerCase(),"."===t.charAt(0))return c(t,a.hostname);r()&&(e=a.hostname.match(r()),e&&(a.tld=e[3],a.domain=e[2]?e[2]+"."+e[3]:void 0,a.sub=e[1]||void 0)),a.port=a.port||("https"===a.protocol?"443":"80"),a.protocol=a.protocol||("443"===a.port?"https":"http")}return t in a?a[t]:"[]"===t?a:void 0}}(),"undefined"!=typeof jQuery&&jQuery.extend({url:function(r,t){return window.url(r,t)}});
function Event(t){this._observer=t,this._listeners=[]}Event.prototype={constructor:"Event",attach:function(t){this._listeners.push(t)},notify:function(t){for(var s=0,e=this._listeners.length;e>s;s++)this._listeners[s](this._observer,t)}};
!function(e){window.frameEndTime=(new Date).getTime();var t={init:function(e,i){return function(){t.fillHtml(e,i),t.bindEvent(e,i)}()},fillHtml:function(e,t){return function(){e.empty(),t.current>1?e.append('<a href="javascript:;" class="prevPage" se-linkid="page-prev">上一页</a>'):(e.remove(".prevPage"),e.append('<span class="disabled" style="display:none;">上一页</span>')),1!=t.current&&t.current>=4&&4!=t.pageCount&&e.append('<a href="javascript:;" class="tcdNumber" se-linkid="page-1">1</a>'),t.current-2>2&&t.current<=t.pageCount&&t.pageCount>5&&e.append("<span>...</span>");var i=t.current-2,a=t.current+2;for((i>1&&t.current<4||1==t.current)&&a++,t.current>t.pageCount-4&&t.current>=t.pageCount&&i--;a>=i;i++)i<=t.pageCount&&i>=1&&(i!=t.current?e.append('<a href="javascript:;" class="tcdNumber" se-linkid="page-'+i+'">'+i+"</a>"):e.append('<span class="current">'+i+"</span>"));t.current+2<t.pageCount-1&&t.current>=1&&t.pageCount>5&&e.append("<span>...</span>"),t.current!=t.pageCount&&t.current<t.pageCount-2&&4!=t.pageCount&&e.append('<a href="javascript:;" class="tcdNumber" se-linkid="page-'+t.pageCount+'">'+t.pageCount+"</a>"),t.current<t.pageCount?e.append('<a href="javascript:;" class="nextPage" se-linkid="page-next">下一页</a>'):(e.remove(".nextPage"),e.append('<span class="disabled" style="display:none;">下一页</span>'))}()},bindEvent:function(i,a){return function(){i.on("click","a.tcdNumber",function(){var n=parseInt(e(this).text());t.fillHtml(i,{current:n,pageCount:a.pageCount}),"function"==typeof a.backFn&&a.backFn(n)}),i.on("click","a.prevPage",function(){var e=parseInt(i.children("span.current").text());t.fillHtml(i,{current:e-1,pageCount:a.pageCount}),"function"==typeof a.backFn&&a.backFn(e-1)}),i.on("click","a.nextPage",function(){var e=parseInt(i.children("span.current").text());t.fillHtml(i,{current:e+1,pageCount:a.pageCount}),"function"==typeof a.backFn&&a.backFn(e+1)})}()}};e.fn.createPage=function(i){var a=e.extend({pageCount:10,current:1,backFn:function(){}},i);t.init(this,a)}}(jQuery);var filterMenu={1:{alias:"order",dft:"0",cell:{1:{val:"totalrank",name:"综合排序"},2:{val:"click",name:"最多点击"},3:{val:"pubdate",name:"最新发布"},4:{val:"dm",name:"最多弹幕"},5:{val:"stow",name:"最多收藏"}}},2:{alias:"duration",dft:"1",cell:{1:{val:"",name:"全部时长"},2:{val:"1",name:"10分钟以下"},3:{val:"2",name:"10-30分钟"},4:{val:"3",name:"30-60分钟"},5:{val:"4",name:"60分钟以上"}}},3:{alias:"tids_1",dft:"1",cell:{1:{alias:"tids_2",val:"",name:"全部分区"},2:{alias:"tids_2",val:"1",name:"动画",cell:{1:{val:"24",name:"MAD·AMV"},2:{val:"25",name:"MMD·3D"},3:{val:"27",name:"综合"},4:{val:"47",name:"短片·手书·配音"}}},3:{alias:"tids_2",val:"13",name:"番剧相关",cell:{1:{val:"32",name:"完结动画"},2:{val:"33",name:"连载动画"},3:{val:"51",name:"资讯"},4:{val:"152",name:"官方延伸"}}},4:{alias:"tids_2",val:"167",name:"国创",cell:{1:{val:"153",name:"国产动画"},2:{val:"168",name:"国产原创相关"},3:{val:"169",name:"布袋戏"},4:{val:"170",name:"资讯"}}},5:{alias:"tids_2",val:"3",name:"音乐",cell:{1:{val:"28",name:"原创音乐"},2:{val:"29",name:"三次元音乐"},3:{val:"30",name:"VOCALOID·UTAU"},4:{val:"31",name:"翻唱"},5:{val:"54",name:"OP/ED/OST"},6:{val:"59",name:"演奏"},7:{val:"130",name:"音乐选集"}}},6:{alias:"tids_2",val:"129",name:"舞蹈",cell:{1:{val:"20",name:"宅舞"},2:{val:"154",name:"三次元舞蹈"},3:{val:"156",name:"舞蹈教程"}}},7:{alias:"tids_2",val:"4",name:"游戏",cell:{1:{val:"17",name:"单机游戏"},2:{val:"171",name:"电子竞技"},3:{val:"172",name:"手机游戏"},4:{val:"65",name:"网络游戏"},5:{val:"173",name:"桌游棋牌"},6:{val:"121",name:"GMV"},7:{val:"136",name:"音游"},8:{val:"19",name:"Mugen"}}},8:{alias:"tids_2",val:"36",name:"科技",cell:{1:{val:"37",name:"纪录片"},2:{val:"39",name:"演讲•公开课"},3:{val:"95",name:"数码"},4:{val:"96",name:"星海"},5:{val:"98",name:"机械"},6:{val:"122",name:"野生技术协会"},7:{val:"124",name:"趣味科普人文"},8:{val:"176",name:"汽车"}}},9:{alias:"tids_2",val:"160",name:"生活",cell:{1:{val:"138",name:"搞笑"},2:{val:"21",name:"日常"},3:{val:"76",name:"美食圈"},4:{val:"75",name:"动物圈"},5:{val:"161",name:"手工"},6:{val:"162",name:"绘画"},7:{val:"175",name:"ASMR"},8:{val:"163",name:"运动"},9:{val:"174",name:"其他"}}},10:{alias:"tids_2",val:"119",name:"鬼畜",cell:{1:{val:"22",name:"鬼畜调教"},2:{val:"26",name:"音MAD"},3:{val:"126",name:"人力VOCALOID"},4:{val:"127",name:"教程演示"}}},11:{alias:"tids_2",val:"155",name:"时尚",cell:{1:{val:"157",name:"美妆"},2:{val:"158",name:"服饰"},3:{val:"164",name:"健身"},4:{val:"159",name:"资讯"}}},12:{alias:"tids_2",val:"165",name:"广告"},13:{alias:"tids_2",val:"5",name:"娱乐",cell:{1:{val:"71",name:"综艺"},2:{val:"137",name:"明星"},3:{val:"131",name:"Korea相关"}}},14:{alias:"tids_2",val:"23",name:"电影",cell:{1:{val:"82",name:"电影相关"},2:{val:"83",name:"其他国家"},3:{val:"85",name:"短片"},4:{val:"145",name:"欧美电影"},5:{val:"146",name:"日本电影"},6:{val:"147",name:"国产电影"}}},15:{alias:"tids_2",val:"11",name:"电视剧",cell:{1:{val:"15",name:"连载剧集"},2:{val:"34",name:"完结剧集"},3:{val:"86",name:"特摄"},4:{val:"128",name:"电视剧相关"}}}}}},drawMenu={1:{alias:"sort_item",dft:"",cell:{1:{val:"0",name:"综合排序"},2:{val:"1",name:"最新发布"},3:{val:"2",name:"最高评分"},4:{val:"3",name:"最多收藏"}}}},commonUtils={subString:function(e,t){e=e.replace(/<[^>]+>/g,"");for(var i=0,a="",n=/[^\x00-\xff]/g,s="",l=e.replace(n,"**").length,o=0;l>o&&(s=e.charAt(o).toString(),null!=s.match(n)?i+=2:i++,!(i>t));o++)a+=s;return l>t&&(a+="..."),a},objToString:function(e){var t="?";for(var i in e)e[i]&&(t+=i+"="+e[i]+"&");return t.replace(/&$/,"")},objToEncodeStr:function(e){var t="?";for(var i in e)e[i]&&(t+=i+"="+encodeURIComponent(e[i])+"&");return t.replace(/&$/,"")},ajax:function(e,t){$.ajax({url:e,success:function(e){t(e)}})},ajaxWithCredential:function(e,t){$.ajax({url:e,xhrFields:{withCredentials:!0},success:function(e){t(e)}})},whereImI:function(){return window.location.pathname.split("/").slice(-1)}};"all"==commonUtils.whereImI()&&(window.onload=function(){var e,t,i=(new Date).getTime(),a=UserStatus.isLogin()?$.cookie("DedeUserID"):void 0;performance&&performance.timing?(t=performance.timing.domContentLoadedEventEnd-performance.timing.navigationStart,e=performance.timing.loadEventStart-performance.timing.navigationStart):(e=i-startTime,t=frameEndTime-startTime),$.ajax({url:"//data.bilibili.com/v/void/web_ld_time",type:"GET",data:{mid:a,info_type:"search_result",ld_time:e}}),$.ajax({url:"//data.bilibili.com/v/void/web_ld_time",type:"GET",data:{mid:UserStatus.isLogin()?$.cookie("DedeUserID"):void 0,info_type:"search_frame",ld_time:t}}),$.ajax({url:"//data.bilibili.com/v/void/web_pic_ld_time",type:"GET",data:{mid:a,ld_time:imgLdTime}})});var search_utils={supports_history_api:function(){return!(!window.history||!history.pushState)}(),ie_url:null,main_url:"//s.search.bilibili.com"};$(function(){function e(e){this.cfg={fold:null,selectedClass:"active",queryObj:null,current:null,pageCount:null,totalNum:null,keyword:"undefined"!=typeof url("?keyword")?url("?keyword"):null,ie_url:null,isSetUrl:!0,isCleanFilter:!1},this.isShowLvChange=new Event(this),this.isShowSexyChange=new Event(this),this.lvSelectChange=new Event(this),this.sexySelectChange=new Event(this),this.reportSexyChange=new Event(this),this.reportLvChange=new Event(this),this.selectedChanging=new Event(this),this.menuUlAdding=new Event(this),this.menuUlRemoving=new Event(this),this.foldChanging=new Event(this),this.queryObjChanging=new Event(this),this.pageCountChanging=new Event(this),this.ajaxQuerying=new Event(this),this.ajaxQueryCompleting=new Event(this),this.totalNumChanging=new Event(this),this.liveOrderChanging=new Event(this),this.liveCoverChanging=new Event(this),this.init(e,!1)}function t(e){var t=this;this.mdl=e,this.mdl.queryObjChanging.attach(function(e,i){i.isSetUrl&&(search_utils.supports_history_api?t.setUrlView(i.queryObj):t.locationTo())})}function i(e){var t=this;this.$listWrap=$(".ajax-render"),this.$noResult=$(".no-result"),this.$videoWrap=$("#video-list"),this.$soInfo=$(".soInfo"),this.mdl=e,this.mdl.ajaxQuerying.attach(function(e,i){t.$noResult.hide(),t.$listWrap.show(),t.$listWrap.html(""),t.$listWrap.addClass("loading"),t.$listWrap.append("<div class='ajax-loading'></div>")}),this.mdl.ajaxQueryCompleting.attach(function(e,i){if(i.errTxt)"all"==commonUtils.whereImI(),t.$listWrap.hide(),t.$noResult.find(".text").html(i.errTxt),t.$noResult.show();else{var a=i.html;t.$noResult.hide(),t.$listWrap.show(),t.renderVideoList(a),$(".ajax-render .video > a").each(function(e,t){var i=$(t).attr("href").match(/.*av(\d+)\?/)[1];$(t).find(".img").append('<i class="search-watch-later icon-later-off" data-aid="'+i+'"></i>')}),b.reinit(),"upuser"==commonUtils.whereImI()&&(v.init(),onLoginInfoLoaded(function(e){e.isLogin&&g.checkIfAdd()})),"pgc"==commonUtils.whereImI()&&c.reInit(),"bangumi"==commonUtils.whereImI()&&d.init()}t.$listWrap.removeClass("loading"),t.$listWrap.remove(".ajax-loading")}),this.mdl.queryObjChanging.attach(function(e,t){"all"==commonUtils.whereImI()&&(t.isDisplay?$(".so-wrap .all-other").removeClass("no"):$(".so-wrap .all-other").addClass("no"))})}function a(e,t){var i=this;this.$wrap=$(".paging-wrap"),this.$pageWrap=$("#video-paging"),this.$baiduSearch=$("#video-paging-search"),this.$soInfo=$(".so-info"),this.mdl=e,this.pageClick=new Event(this),this.mdl.queryObjChanging.attach(function(e,t){i.createPageView()}),this.init()}function n(e){var t=this;this.mdl=e,this.$menuWrap=$(".filter-block"),this.$soInfo=$(".so-info"),this.$liveOrder=$(".live-room .sort-filter a"),this.$liveCover=$(".live-room .face-filter a"),this.itemClick=new Event(this),this.itemClicking=new Event(this),this.foldClicking=new Event(this),this.switchClicking=new Event(this),this.liveCoverClick=new Event(this),this.liveOrderClick=new Event(this),this.mdl.selectedChanging.attach(function(e,i){var a=i.$ele,n=i.sltStyle;t.selectedChange(a,n)}),this.mdl.menuUlAdding.attach(function(e,i){t.buildUl(i.itemObj,i.pAlias,i.level,i.leftPos)}),this.mdl.menuUlRemoving.attach(function(e,i){t.menuUlRemove(i.alias)}),this.mdl.foldChanging.attach(function(){t.setFoldView(t.mdl.getFold())}),this.$menuWrap.click(function(e){t.itemClick.notify({eObj:e})}),this.$menuWrap.find(".fold").click(function(e){t.foldClicking.notify({eObj:this})}),this.$soInfo.find(".js-video-switch").click(function(e){t.switchClicking.notify({eObj:this})}),"all"==commonUtils.whereImI()||"video"==commonUtils.whereImI()?this.init(!0):"drawyoo"==commonUtils.whereImI()&&this.init()}function s(e,t,i){var a=this;"lv"==t?(this.cur="curLv",this.isShow="isShowLv"):(this.cur="curSexy",this.isShow="isShowSexy"),this.$component=$(".select-component."+t),this.selectMenu=e,this.type=t,this.model=i,this.init(),this.bindClickCurrent(),this.bindClickSelectItem(),this.bindBodyClick(),"lv"==t?(this.model.isShowLvChange.attach(function(e,t){a.changeShowView()}),this.model.lvSelectChange.attach(function(e,t){a.changeCurView(t.$dom,t.type)}),this.model.reportLvChange.attach(function(e,t){a.clickReport(t)})):(this.model.isShowSexyChange.attach(function(e,t){a.changeShowView()}),this.model.sexySelectChange.attach(function(e,t){a.changeCurView(t.$dom,t.type)}),this.model.reportSexyChange.attach(function(e,t){a.clickReport(t)}))}function l(t){this.sortModel=new e(t),this.init(this.sortModel)}function o(e){return e=e.toString(),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&#34;"),e=e.replace(/'/g,"&#39;")}var r=(function(){var e=$(".wrap .hover-bar"),t=$(".wrap"),i=null,a=t.find(".sub.active").position()?t.find(".sub.active").position().left:null;!function(){null!=a&&e.css({left:a+"px",display:"block"})}(),t.find(".sub").on("mouseenter",function(){var t=$(this).position().left;i&&clearTimeout(i),i=setTimeout(function(){e.animate({left:t+"px"},200,"linear")},100)}),t.find(".sub").on("mouseleave",function(){i&&clearTimeout(i)}),t.on("mouseleave",function(){i&&clearTimeout(i),i=setTimeout(function(){null!=a&&e.animate({left:a+"px"},200,"linear")},200)})}(),{pageCount:$("body").data("num_pages"),current:$("body").data("cur_page"),total:$("body").data("total"),keyword:$("body").attr("data-keyword")}),c=function(){function e(){s=$("body").attr("data-trackid"),$.each($dom,function(e,i){var a=$(i).data("id");t(a,i)})}function t(e,t){var a=l.replace(/\{id\}/,e);commonUtils.ajax(a,function(e){e=e.reverse();for(var a="",n=0;n<=e.length-1;n++){var s=e[n].episode;if(-1==e[n].episode&&(s="全集"),12==n){$(t).find(".list-more").addClass("show");break}a+=i(e[n].aid,s,n)}0==e.length&&(a='<p class="text">暂时没有内容</p>'),$(t).prepend(a)})}function i(e,t,i){return o.replace(/\{id\}/,e).replace(/\{seid\}/,s).replace(/\{id\}/,e).replace(/\{no\}/,i).replace(/\{index\}/,t)}function a(){e()}function n(){$dom=$(".js-tvplay .synthetical .so-episode"),e()}$dom=$(".js-tvplay .synthetical .so-episode");var s="",l=($dom.length,"//www.bilibili.com/index/bangumi/{id}.json"),o='<a class="list" href="//www.bilibili.com/video/av{id}?from=search&seid={seid}" target="_blank" se-linkid="tv-{id}-{no}">{index}</a>';return{init:a,reInit:n}}();e.prototype={constructor:"SortModel",init:function(e,t){var i=this;if(this.setFold("true"==$.cookie("fold")),$.extend(this.cfg,e),this.cfg.current=r.current,this.cfg.pageCount=r.pageCount,this.cfg.totalNum=r.total,this.cfg.keyword=r.keyword,this.cfg.menu&&!i.cfg.isCleanFilter&&null!=this.cfg.queryObj){var a="";if("drawyoo"==commonUtils.whereImI())null!=this.cfg.queryObj.sort_item&&(a=this.cfg.queryObj.sort_item,this.cfg.selected[1]=this.getLevelByVal(a,"1"));else if(null!=this.cfg.queryObj.order&&(a=this.cfg.queryObj.order,this.cfg.selected[1]=this.getLevelByVal(a,"1")),null!=this.cfg.queryObj.duration&&(a=this.cfg.queryObj.duration,this.cfg.selected[2]=this.getLevelByVal(a,"2")),null!=this.cfg.queryObj.tids_1){a=this.cfg.queryObj.tids_1,this.cfg.selected[3]=this.getLevelByVal(a,"3");var n=this.cfg.selected[3],s="3."+n;null!=this.cfg.menu[3].cell&&null!=this.cfg.menu[3].cell[n]&&(null!=this.cfg.menu[3].cell[n].cell&&this.cfg.menuStru.push(s),null!=this.cfg.queryObj.tids_2&&(a=this.cfg.queryObj.tids_2,this.cfg.selected[s]=this.getLevelByVal(a,s)))}}},getLevelByVal:function(e,t){for(var i,a=this.getLevelArr(t),n=this.cfg.menu,s=0;s<a.length;s++){n=n[a[s]].cell;for(var l in n)if(n[l].val==e){i=l;break}}return i},getLevelArr:function(e){var e=e.toString(),t=e.split(".");return t},getMenuObjByLevel:function(e){var t=null,i=this.getLevelArr(e);if(null!=i&&i.length>0){t=this.cfg.menu;for(var a=0;a<i.length;a++)t=a==i.length-1?t[i[a]]:t[i[a]].cell}return t},getParentLevel:function(e){var t="",i=this.getLevelArr(e);if(i.length>1)for(var a=0;a<i.length-1;a++)t=0==a?i[a]:t+"."+i[a];return t.toString()},getAlias:function(e){var t=this.getLevelArr(e),i="",a=null;if(null!=t&&t.length>0){a=this.cfg.menu;for(var n=0;n<t.length&&(a=a[t[n]],null!=a.cell);n++)i=a.alias,a=a.cell}return i},getAliasBySelected:function(e,t){var i=this.getLevelArr(e),a="",n=null;if(null!=i&&i.length>0){n=this.cfg.menu;for(var s=0;s<i.length;s++)a=n[i[s]].alias,n=n[i[s]].cell}return a},getParentAliasByLevel:function(e){var t=this.getLevelArr(e),i="",a=null;if(null!=t&&t.length>0&&(a=this.cfg.menu,t.length>1))for(var n=0;n<t.length;n++)a=a[t[n]],n==t.length-2&&(i=a.alias),a=a.cell;return i},getValBySelected:function(e,t){var i="";if(null!=t){var a=this.getLevelArr(e),n=null;if(null!=a&&a.length>0){n=this.cfg.menu;for(var s=0;s<a.length;s++)n=n[a[s]].cell;i=n[t].val}}return i},setFold:function(e){this.cfg.fold=e,$.cookie("fold",e),this.foldChanging.notify()},getFold:function(){return this.cfg.fold},isToFold:function(){var e=!0,t=this.cfg.menu,i=this.cfg.selected;for(var a in t){var n=t[a].dft;if(null!=n&&"0"!=n&&i[a]!=n){e=!1;break}}return e},setQueryObj:function(){var e=this;if(this.cfg.queryObj={},this.cfg.keyword&&(this.cfg.queryObj.keyword=this.cfg.keyword),this.cfg.current&&(this.cfg.queryObj.page=this.cfg.current),"live"==commonUtils.whereImI())"undefined"==typeof url("?type")||""==url("?type")||"all"==url("?type")?(this.cfg.queryObj.type="all",this.cfg.queryObj.order=this.cfg.order,this.cfg.queryObj.coverType=this.cfg.coverType):"user"==url("?type")?this.cfg.queryObj.type="user":this.cfg.queryObj.type=url("?type");else if("all"==commonUtils.whereImI()||"video"==commonUtils.whereImI()){for(var t=this.cfg.menuStru,i=this.cfg.selected,a=!0,n=0;n<t.length;n++){var s=t[n],l=i[s],o=this.getAliasBySelected(s,l),r=this.getValBySelected(s,l);null!=r&&r.length>0&&(this.cfg.queryObj[o]=r),"1"!=s&&"2"!=s&&"3"!=s||a&&"1"!=l&&(a=!1)}a&&1!=this.cfg.current&&(a=!1)}else if("drawyoo"==commonUtils.whereImI())for(var i=this.cfg.selected,t=this.cfg.menuStru||[],n=0;n<t.length;n++){var s=t[n],l=i[s],o=this.getAliasBySelected(s,l),r=this.getValBySelected(s,l);null!=r&&r.length>0&&(this.cfg.queryObj[o]=r)}else"upuser"==commonUtils.whereImI()&&(this.cfg.queryObj.lv=this.cfg.curLv,this.cfg.queryObj.sexy=this.cfg.curSexy);e.cfg.isSetUrl&&!search_utils.supports_history_api?(e.setIeUrl(),window.location.href=e.cfg.ie_url):e.queryObjChanging.notify({queryObj:e.cfg.queryObj,isDisplay:a,isSetUrl:e.cfg.isSetUrl}),e.ajaxQuery(e.cfg.queryObj)},ajaxQuery:function(e){this.ajaxQuerying.notify();var t=this,i="/all"==url("path")?"/video":url("path"),a=encodeURI("/ajax_api/"+i.split("/").slice(-1).toString().toLowerCase());e._=(new Date).getTime(),$.ajax({url:a,dataType:"json",data:e}).then(function(e){if("all"==commonUtils.whereImI()){0==e.code?1:2,UserStatus.isLogin()?$.cookie("DedeUserID"):void 0}var i=e.code,a=e.trackid,n=null;$("body").attr({"data-trackid":a}),0!=i&&(n=e.text);var n=e.text,s=e.html;t.setPageCount(e.numPages),t.setTotalNum(e.numResults?e.numResults>=1e3?"1000+":e.numResults:0),t.ajaxQueryCompleting.notify({html:s,total:t.cfg.totalNum,code:i,errTxt:n})},function(){})},deleteMenuByLevel:function(e,t){if(this.cfg.menuStru.indexOf(e)>=0){var i=this.cfg.menuStru.indexOf(e);this.cfg.menuStru.splice(i,1),this.deleteSelectByLevel(e,t)}},deleteSelectByLevel:function(e,t){delete this.cfg.selected[e],this.menuUlRemoving.notify({alias:t})},addMenuByLevel:function(e,t,i){if(this.cfg.menuStru.push(e),t){var a=this.getMenuObjByLevel(e),n=this.getParentAliasByLevel(e);this.menuUlAdding.notify({itemObj:a,pAlias:n,level:e,leftPos:i})}},setSelected:function(e,t,i){var a=this;this.cfg.selected[e]=t,this.selectedChanging.notify({$ele:i,sltStyle:a.cfg.selectedClass})},setCurrentPage:function(e,t){this.cfg.current=e,t&&this.setQueryObj()},setPageCount:function(e){e!=this.cfg.pageCount&&(this.cfg.pageCount=e,this.pageCountChanging.notify({pCount:e}))},setTotalNum:function(e){e!=this.cfg.totalNum&&(this.cfg.totalNum=e,this.totalNumChanging.notify({num:e}))},setLiveCover:function(e){this.cfg.coverType=e,this.setCurrentPage(1,!1),this.setQueryObj()},setLiveOrder:function(e){this.cfg.order=e,this.setCurrentPage(1,!1),this.setQueryObj()},setIeUrl:function(){this.cfg.ie_url="//"+location.host+"/"+commonUtils.whereImI()+commonUtils.objToEncodeStr(this.cfg.queryObj)},setLvShow:function(e){e?this.cfg.isShowLv=!1:(!this.cfg.isShowLv&&this.cfg.isShowSexy&&this.setSexyShow(),this.cfg.isShowLv=!this.cfg.isShowLv),this.isShowLvChange.notify()},setSexyShow:function(e){e?this.cfg.isShowSexy=!1:(!this.cfg.isShowSexy&&this.cfg.isShowLv&&this.setLvShow(),this.cfg.isShowSexy=!this.cfg.isShowSexy),this.isShowSexyChange.notify()},setCurLv:function(e,t){var i=this.cfg.curLv,a=e;this.cfg.curLv=e,this.setCurrentPage(1,!1),this.lvSelectChange.notify({$dom:t,type:"lv"}),this.setQueryObj(),this.reportLvChange.notify({type:"lv",from:i,to:a})},setCurSexy:function(e,t){var i=this.cfg.curSexy,a=e;this.cfg.curSexy=e,this.setCurrentPage(1,!1),this.sexySelectChange.notify({$dom:t,type:"sexy"}),this.setQueryObj(),this.reportSexyChange.notify({type:"sexy",from:i,to:a})}},t.prototype={setUrlView:function(e){history.replaceState(url("?"),"",commonUtils.objToEncodeStr(e))},locationTo:function(){var e=this;window.location.href=encodeURI(e.mdl.cfg.ie_url)}},i.prototype={renderVideoList:function(e){this.$listWrap.html("").append(e)}},a.prototype={init:function(){var e=this;this.createPageView(),this.mdl.pageCountChanging.attach(function(){e.createPageView()}),this.mdl.totalNumChanging.attach(function(){var t=(e.mdl.cfg.pageCount,e.mdl.cfg.totalNum);e.setSoInfo(t)})},createPageView:function(){var e,t=this,i=this.mdl.cfg.current;e=this.mdl.cfg.pageCount?this.mdl.cfg.pageCount:1,1==e?t.$wrap.css({display:"none"}):t.$wrap.css({display:"block"}),this.$pageWrap.html("").off(),this.$pageWrap.createPage({pageCount:e,current:i,backFn:function(e){if(t.pageClick.notify({num:e}),"all"==commonUtils.whereImI()){var i=$(".filter-block").offset().top;$("html,body").scrollTop(i-50)}else $("html,body").scrollTop(45)}})},setBaiduSearch:function(e){this.$baiduSearch.attr({href:this.$baiduSearch.attr("href")+encodeURIComponent(e)}),this.$baiduSearch.html("用百度搜索"+e+">")},setSoInfo:function(e){"live"==commonUtils.whereImI()?"undefined"==typeof url("?type")||""==url("?type")||"all"==url("?type")?$(".live-room .headline .num").html(e):"user"==url("?type")&&$(".live-user .headline .num").html(e):"upuser"==commonUtils.whereImI()?this.$soInfo.find(".so-info-total").html("共找到"+e+"个up主"):this.$soInfo.find(".so-info-total").html("共"+e+"条数据")}},n.prototype={constructor:"SortView",setSelectedClass:function(){var e=this.mdl.cfg.menuStru,t=this.mdl.cfg.selected,i=this.mdl.cfg.selectedClass;if(e)for(var a=0;a<e.length;a++){var n=e[a],s=t[n],l=n;null!=s&&(l=l+"."+s),this.mdl.cfg.$menuWrap.find("li").each(function(e,t){return $(this).attr("data-level")==l?($(this).siblings("li").removeClass(i),$(this).addClass(i),!1):void 0})}},setFoldView:function(e){var t=this.$menuWrap,i=t.find(".fold"),a=this.mdl.cfg.menuStru[0],n=(this.mdl.getLevelArr(a),this.mdl.getAlias(a));e?(t.addClass("no-border"),$(".fold").html("更多筛选&nbsp;<i class='arrow-bottom'></i>"),$(".fold").addClass("on"),t.children("ul").each(function(e,t){$(this).attr("id")!=n&&$(this).css({display:"none"})})):(this.$menuWrap.removeClass("no-border"),i.html("收起筛选&nbsp;<i class='arrow-up'></i>"),i.removeClass("on"),t.children("ul").each(function(e,t){$(this).css({display:"block"})}))},selectedChange:function(e,t){e.siblings().removeClass(t),e.addClass(t)},buildUl:function(e,t,i,a){if(null!=e.cell){var n=e.alias,s="",l="";for(var o in e.cell){var r=e.cell,c=i+"."+o,d='<li class="filter-item" data-val="{val}" data-level="{level}" data-sub="{subAlias}" se-linkid="{alias}-{val}"><a href="javascript:;" >{name}</a></li>';d=d.replace(/\{val\}/,r[o].val).replace(/\{level\}/,c).replace(/\{subAlias\}/,null==r[o].alias||""==r[o].alias?"":r[o].alias).replace(/\{alias\}/,n).replace(/\{val\}/,null==r[o].val||""==r[o].val?"0":r[o].val).replace(/\{name\}/,r[o].name),l+=d}if($("#"+n).length>0)$("#"+n).html()!=l&&$("#"+n).html(l);else if(null!=t&&t.length>0){if(s="<ul id='{alias}' style='display:none;'>"+l+"<i class='icon-tid2-arr'></i></ul>",s=s.replace(/\{alias\}/,n),s=$(s).addClass("sub"),$("#"+t).after(s),void 0==a)try{var u=$("#"+t).children("[data-level='"+i+"']");a=u.position().left+u.outerWidth()/2}catch(h){a=0}var f=$("#"+n).outerWidth(),p=(a-5)/f*100;f/2>a?($("#"+n).find(".icon-tid2-arr").css({left:a-5+"px"}),$("#"+n).css({transform:"scale(1)",transformOrigin:p+"% center",display:"inline-block"})):880>=f/2+a?($("#"+n).find(".icon-tid2-arr").css({left:f/2-5+"px"}),$("#"+n).css({left:a-f/2+"px",transform:"scale(1)",display:"inline-block"})):(p=(f-(880-a))/f*100,$("#"+n).find(".icon-tid2-arr").css({right:880-a-5+"px"}),$("#"+n).css({left:880-f+"px",transform:"scale(1)",transformOrigin:p+"% center",display:"inline-block"}))}else{s="<ul id='{alias}'>"+l+"</ul>",s=s.replace(/\{alias\}/,n);var m=this.$menuWrap;m.append(s)}}},buildMenu:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=this.mdl.getMenuObjByLevel(e[t]),a=this.mdl.getParentAliasByLevel(e[t]);this.buildUl(i,a,e[t])}if($(".menu-loading").remove(),"all"==commonUtils.whereImI()){var n,s=(new Date).getTime();n=performance&&performance.timing?s-performance.timing.navigationStart:s-startTime,$.ajax({url:"//data.bilibili.com/v/void/web_ld_time",type:"GET",data:{mid:UserStatus.isLogin()?$.cookie("DedeUserID"):void 0,info_type:"search_filter",ld_time:n}})}},menuUlRemove:function(e){$("#"+e).length>0&&$("#"+e).remove()},init:function(e){this.buildMenu(this.mdl.cfg.menuStru),this.setSelectedClass(),e&&this.setFoldView(this.mdl.cfg.fold)}},s.prototype={constructor:s,findItemByVal:function(e,t){for(var i=0;i<t.length;i++)if(t[i].val==e)return t[i]},init:function(){var e=this.model.cfg[this.cur],t=this.findItemByVal(e,this.selectMenu),i='<div class="current-select" data-value="{index}"><span>{value}</span><i class="triangle-down"></i></div><div class="select-wrap"></div>',a='<span class="select-item {className}" data-value="{index}">{value}</span>';this.$component.append(i.replace(/\{index\}/,e).replace(/\{value\}/,t.alias||t.value));var n=this.$component.find(".select-wrap");this.selectMenu.forEach(function(t,i){var s=t.val==e?"selected":"";n.append(a.replace(/\{className\}/,s).replace(/\{index\}/,t.val).replace(/\{value\}/,t.value))})},bindClickCurrent:function(){var e=this,t=this.$component.find(".current-select");this.$component.find(".select-wrap");t.on("click",function(){"lv"==e.type?e.model.setLvShow():e.model.setSexyShow()})},bindClickSelectItem:function(){var e=this,t=this.$component.find(".select-item");this.$component.find(".current-select");t.on("click",function(t){if(t.preventDefault(),!$(this).hasClass("selected")){var i=$(this).data("value");"lv"==e.type?(e.model.setCurLv(i,$(this)),e.model.setLvShow()):(e.model.setCurSexy(i,$(this)),e.model.setSexyShow())}})},bindBodyClick:function(){var e=this;this.$component.on("click",function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$("body").on("click",function(){"lv"==e.type?e.model.setLvShow(!0):"sexy"==e.type&&e.model.setSexyShow(!0)})},changeCurView:function(e,t){var i=this.model.cfg[this.cur],a=this.findItemByVal(i,this.selectMenu),n=a.alias||a.value,s=this.$component.find(".current-select");s.data("value",i),s.find("span").html(n),e.addClass("selected").siblings().removeClass("selected")},changeShowView:function(e){var t=this.model.cfg[this.isShow];t?(this.$component.find(".select-wrap").show(),this.$component.find(".triangle-down").addClass("on")):(this.$component.find(".select-wrap").hide(),this.$component.find(".triangle-down").removeClass("on"))},clickReport:function(e){var t,i;t="lv"==e.type?"filter_level":"filter_sex",i={linkid:t,trackid:$("body").attr("data-trackid"),from:e.from,to:e.to},rec_rp("search_click",i)}},l.prototype={init:function(e){var l=this;"all"!=commonUtils.whereImI()&&"video"!=commonUtils.whereImI()||(this.sortView=new n(e),this.sortView.foldClicking.attach(function(e,t){var i=t.eObj;l.foldClickCtrl($(i))}),this.sortView.switchClicking.attach(function(e,t){var i=t.eObj;l.switchClickCtrl($(i))}),this.sortView.itemClick.attach(function(e,t){var i=t.eObj;$(i.target).parent().hasClass("filter-item")&&l.itemClickCtrl($(i.target))})),"drawyoo"==commonUtils.whereImI()&&(this.sortView=new n(e),this.sortView.itemClick.attach(function(e,t){var i=t.eObj;$(i.target).parent().hasClass("filter-item")&&l.itemClickCtrl($(i.target))})),"all"!=commonUtils.whereImI()&&"bangumi"!=commonUtils.whereImI()||d.init(),"live"==commonUtils.whereImI()&&(this.sortView=new n(e),this.sortView.$liveOrder&&this.sortView.$liveOrder.click(function(){$(this).siblings().removeClass("active"),$(this).remove("active").addClass("active"),l.sortModel.setLiveOrder($(this).data("order"))}),this.sortView.$liveCover&&this.sortView.$liveCover.click(function(){$(this).siblings().removeClass("active"),$(this).remove("active").addClass("active"),l.sortModel.setLiveCover($(this).data("cover"))})),"upuser"==commonUtils.whereImI()&&(this.lvSelectView=new s(h,"lv",e),this.sexySelectView=new s(f,"sexy",e)),this.vListView=new i(e),this.urlView=new t(e),this.pageView=new a(e),this.pageView.pageClick.attach(function(e,t){var i=t.num;l.pageClickCtrl(i)})},itemClickCtrl:function(e){var t=this,i=e.parent("li"),a=i.attr("data-level").toString(),a=i.attr("data-level").toString(),n=this.sortModel.getLevelArr(a),s=this.sortModel.getParentLevel(a).toString(),l=n[n.length-1];if(i.data("sub")){var o=e.position().left+e.outerWidth()/2,r=i.data("sub"),c=this.sortModel.cfg.menuStru;c.indexOf(a)<0?i.siblings().each(function(e,i){var a=$(this).attr("data-level").toString();t.sortModel.deleteMenuByLevel(a,r)}):t.sortModel.deleteSelectByLevel(a,r),this.sortModel.addMenuByLevel(a,!0,o)}this.sortModel.setSelected(s,l,i),this.sortModel.setCurrentPage(1,!0)},foldClickCtrl:function(e){e.hasClass("on")?this.sortModel.setFold(!1):this.sortModel.setFold(!0)},pageClickCtrl:function(e){this.sortModel.setCurrentPage(e,!0)},switchClickCtrl:function(e){e.addClass("active").siblings().removeClass("active"),$(".so-info").find(".js-video-switch").eq(0).hasClass("active")?($(".ajax-render").find(".video:not(.av)").removeClass("list").addClass("matrix"),$.cookie("s_l_s","0",{expires:7})):($(".ajax-render").find(".video").removeClass("matrix").addClass("list"),$.cookie("s_l_s","1",{expires:7}))}},SearchHistory.save(o(r.keyword));var d=function(){function e(){$(".so-episode").on("click",".list.more",function(e){$(this).parent(".so-episode").addClass("showall");var t=$(this).parent(".so-episode.showall").height()-40;$(this).parents(".synthetical").css({height:120+t+"px"})}),$(".so-episode").on("click",".list.collapse",function(e){$(this).parents(".synthetical").css({height:120}),$(this).parent(".so-episode").removeClass("showall")})}return{init:e}}(),u={urlStr:url(),queryObj:url("?"),$menuWrap:$(".filter-block")};if("live"==commonUtils.whereImI())$.extend(u,{order:url("?order")?url("?order"):"online",coverType:url("?coverType")?url("?coverType"):"user_cover"});else if("drawyoo"==commonUtils.whereImI())$.extend(u,{menu:drawMenu,menuStru:["1"],selected:{1:"1"}});else if("all"==commonUtils.whereImI()||"video"==commonUtils.whereImI())$.extend(u,{menu:filterMenu,menuStru:["1","2","3"],selected:{1:"1",2:"1",3:"1"}});else if("upuser"==commonUtils.whereImI()){var h=[{val:"-1",value:"全部",alias:"Lv等级"},{val:"6",value:"Lv6"},{val:"5",value:"Lv5"},{val:"4",value:"Lv4"},{val:"3",value:"Lv3"},{val:"2",value:"Lv2"},{val:"1",value:"Lv1"},{val:"0",value:"LV0"}],f=[{val:"-1",value:"全部",alias:"性别"},{val:"1",value:"男"},{val:"2",value:"女"},{val:"3",value:"保密"}],p=url("?lv"),m=url("?sexy");h[p]||(p="-1"),f[m]||(m="-1"),$.extend(u,{curLv:p,curSexy:m,isShowLv:!1,isShowSexy:!1})}var v=(new l(u),function(){function e(){t&&t.off("mouseenter").off("mouseleave"),t=$(".up-item .video-item"),t.on("mouseenter",function(e){var t=$(this).offset(),o=t.top,r=t.left,c=$(this).data("title"),d=$(this).data("uname"),u=$(this).data("pubdate"),h=$(this).data("pic");try{h=utils.webp(h,{w:a,h:n})}catch(e){}var f=$(this).data("desc"),p=$(this).data("play"),m=$(this).data("dm"),v=$(this).data("fav"),g=$(this).data("coin");i&&i.remove(),i=$(s.replace(/\{title\}/,c).replace(/\{uname\}/,d).replace(/\{pubdate\}/,u).replace(/\{pic\}/,h).replace(/\{desc\}/,f).replace(/\{playNum\}/,p).replace(/\{dmNum\}/,m).replace(/\{favNum\}/,v).replace(/\{coinNum\}/,g)),l&&clearTimeout(l),l=setTimeout(function(){i.css({top:o-200+"px",left:r+"px"}).appendTo("body").show()},200)}).on("mouseleave",function(){l&&clearTimeout(l),l=setTimeout(function(){i.remove()},200)})}var t,i,a=192,n=120,s='<div class="video-hover-wrap"><p class="video-title">{title}</p><div class="up-info"><span class="upname">{uname}</span><span class="pubdate">{pubdate}</span></div><div class="video-info"><div class="pic-wrap default-img-big"><img src="{pic}" alt="" class="video-pic"></div><p class="desc">{desc}</p></div><div class="nums"><div class="num play"><i  class="icon-playtime"></i><span>{playNum}</span></div> <div class="num dm"><i class="icon-dm"></i><span>{dmNum}</span></div><div class="num fav"><i class="icon-fav"></i><span>{favNum}</span></div><div class="num coin"><i class="icon-coin"></i><span>{coinNum}</span></div></div></div>',l=null;return{init:e}}());v.init();var g=function(){function e(){var e,a,s=$(this),l=s.data("id"),o=s.hasClass("already"),r=s.attr("data-num");o?(e="upuser_unatt_"+r,i(this,l,function(){s.removeClass("already").html("+ 关注").off()})):(e="upuser_att_"+r,
t(this,l,function(){s.addClass("already").html("已关注"),n(s)})),a={linkid:e,upid:l,trackid:"upuser"==commonUtils.whereImI()?$("body").attr("data-trackid"):$("body").attr("data-trackid_special")},rec_rp("search_click",a)}function t(e,t,i){return UserStatus.isLogin(e)?void a(e,t,1,function(a){0==a.code?(window.AttentionList.push(t),resetAttentionCache(),(new MessageBox).show(e,"关注成功!",1e3,"ok"),"undefined"!=typeof i&&i(a)):(new MessageBox).show(e,a.msg,2e3,"warning")}):!1}function i(e,t,i){return UserStatus.isLogin(e)?void a(e,t,2,function(a){if(0==a.code){var n=window.AttentionList.indexOf(t);-1!=n&&(window.AttentionList.splice(n,1),resetAttentionCache()),(new MessageBox).show(e,"取消关注成功!",1e3,"ok"),"undefined"!=typeof i&&i(a)}else(new MessageBox).show(e,a.msg,2e3,"warning")}):!1}function a(e,t,i,a){Bilibili.initCrossdomain(),"function"==typeof t?(a=t,t=e,e=null):"undefined"==typeof t&&(t=e,e=null),$.ajax({url:"//api.bilibili.com/x/relation/modify",data:{fid:t,act:i,re_src:120,jsonp:"jsonp"},dataType:"json",type:"post",xhrFields:{withCredentials:!0},success:function(t){"undefined"==typeof a?0==t.code?(new MessageBox).show(e,"关注成功!",1e3,"ok"):(new MessageBox).show(e,t.msg,2e3,"warning"):a(t)}})}function n(e){e.hover(function(){e.html("取消关注")},function(){e.html("已关注")})}function s(){var e=[];$.each($(".js-attention-user"),function(t,i){var a=$(i).data("id");e.push(a)});var t=e.join(",");t&&$.ajax({url:"//api.bilibili.com/x/relation/relations",type:"GET",data:{jsonp:"jsonp",fids:t},xhrFields:{withCredentials:!0},success:function(e){window.AttentionList=[];var t=e.data;if(0==e.code&&t){for(var i in t)window.AttentionList.push(i);for(var a=0;a<window.AttentionList.length;a++)o[window.AttentionList[a]]=!0}$.each($(".js-attention-user"),function(e,t){var i=$(t).data("id");o[i]&&($(t).addClass("already").html("已关注"),n($(t)))})}})}function l(t){$("."+t).on("click",".js-attention-user",e),s()}var o={};return{checkIfAdd:s,init:l}}(),w=function(){function e(){s(),r&&r.off().on("click",".js-tag-btn",i)}function t(){r&&r.off().on("click",".js-tag-btn",function(){var e=$(this),t={linkid:e.data("linkid"),linktype:e.data("linktype"),trackid:$("body").attr("data-trackid_special"),tagid:$(this).data("tagid")};rec_rp("search_click",t),window.biliQuickLogin(function(){window.loadLoginStatus&&window.loadLoginStatus(!0),setTimeout(s(),1)})})}function i(){var e=$(this),t=$(this).parent(),i=$(this).siblings(".tag-num"),s=$(this).data("tagid"),o=i.data("num");$(this).hasClass("has-atten")?n(s,function(a){a&&0==a.code&&(e.removeClass("has-atten"),e.text("+关注"),Number(o)&&(o=Number(o)-1),i.data("num",o),0>=o&&t.addClass("no-num"),i.text(l(o)))}):a(s,function(a){var n={linkid:e.data("linkid"),linktype:e.data("linktype"),trackid:$("body").attr("data-trackid_special"),tagid:s};rec_rp("search_click",n),a&&0==a.code?(e.addClass("has-atten"),e.text("已关注"),Number(o)&&(o=Number(o)+1),i.data("num",o),o>0&&t.hasClass("no-num")&&t.removeClass("no-num"),i.text(l(o))):new window.MessageBox({focusShowPos:"down",Overlap:!0}).show(e,a&&a.message?a.message:"关注失败",1e3,"error")})}function a(e,t){var i={url:o+"/x/tag/subscribe/add",type:"POST",data:{jsonp:"jsonp",tag_id:e},xhrFields:{withCredentials:!0},success:t};postJSONLite(i)}function n(e,t){var i={url:o+"/x/tag/subscribe/cancel",type:"POST",data:{jsonp:"jsonp",tag_id:e},xhrFields:{withCredentials:!0},success:t};postJSONLite(i)}function s(){r&&r.each(function(e){var t=$(this).children(".js-tag-btn"),i=t.data("tagid");$.ajax({url:o+"/x/tag/info",type:"GET",dataType:"jsonp",data:{jsonp:"jsonp",tag_id:i},xhrFields:{withCredentials:!0}}).then(function(e){e&&0==e.code&&e.data&&e.data.is_atten&&(t.addClass("has-atten"),t.text("已关注"))})})}function l(e){var e=String(e);return e.length>=5?(Number(e)/1e4).toFixed(1)+"万":e}var o="//api.bilibili.com",r=$(".tag-att-wrap");return{init:e,unLoginInit:t}}(),y={rocket_top:$(".so-rocket>.rocket-icon"),is_rightDown:!1,is_righting:!1,is_rocketShow:!1,hoverAnimator:null,rocketBacking:new Event,rocketAnimating:new Event,rocketShow:function(){this.rocket_top.fadeIn("slow",function(){})},rocketHide:function(){this.rocket_top.fadeOut("slow",function(){})},rocketAnimatorInit:function(){},rocketBackToTop:function(){},rightGirlRecover:function(){this.right_girl_hover.hide(),this.right_girl_wrap.off()},rightGirlDown:function(){this.is_righting=!0;var e=$(".top-33").offset().left;$(".top-33").css({position:"fixed",left:e});var t=this,i=.55*screen.availHeight||300;this.right_rope.animate({height:i},300,function(){t.is_rightDown=!0,t.is_righting=!1,t.right_girl_wrap.hover(function(){t.right_girl.hide(),t.right_girl_hover.show()},function(){t.right_girl.show(),t.right_girl_hover.hide()}),t.right_girl_wrap.click(function(e){t.rightGirlUp(),$("body,html").stop(!0).animate({scrollTop:0},300)})})},rightGirlUp:function(){if(!this.is_rightDown)return!1;this.right_girl.show(),this.is_righting=!0,this.right_girl_wrap.off(),this.right_girl_hover.hide(),this.right_girl_wrap.removeClass("text");var e=this;this.right_rope.stop().animate({height:"120"},300,function(){e.is_rightDown=!1,e.rightGirlRecover(),e.is_righting=!1,e.right_girl_wrap.off(),$(".top-33").css({position:"absolute",left:988}),e.right_rope.css({height:0})})},init:function(){var e=this,t=!1;e.rocket_top.hover(function(){e.hoverAnimator=new Animator({element:e.rocket_top,frameSource:"//static.hdslb.com/bl2se/images/rocket_frame.png",frameWidth:150,frameHeight:174,totalFrame:5,fps:10}),e.hoverAnimator.start(0)},function(){e.hoverAnimator.stop(),e.rocket_top.css({background:"url(//static.hdslb.com/bl2se/images/rocket_top.png)"})}),e.rocketAnimating.attach(function(t,i){e.rocketAnimator.start()}),e.rocketBacking.attach(function(t,i){$("body,html").stop(!0).animate({scrollTop:0},500,function(){e.rocketHide()})}),e.rocket_top.click(function(t){e.rocketBacking.notify()}),$(window).scroll(function(){var i=$(window).height(),a=$(window).scrollTop();if(a>i/2){if($(".footer").offset().top<$(document).scrollTop()+$(window).height()){var n=$(document).scrollTop()+$(window).height()-$(".footer").offset().top;$(".rocket-con").css({bottom:n+150+"px"})}else $(".rocket-con").css({bottom:"150px"});e.is_rocketShow||(e.is_rocketShow=!0,e.rocketShow()),t||(t=!0,$("#search-wrap").addClass("distort").hide().fadeIn("fast"),$("#search-wrap.distort .input-wrap").focus(function(e){$("#search-block").css({borderColor:"#00a1d6"})}))}else e.is_rocketShow&&(e.is_rocketShow=!1,e.rocketHide()),t&&($("#search-keyword").blur(),$(".js-search-wrap").append($("#search-wrap").removeClass("distort")),t=!1);return!1}).scroll()}},b={$wrapper:$(".so-wrap"),timer:null,init:function(e){this.bindScroll()},bindScroll:function(){var e=this;$(window).on("scroll.lazyload",function(){e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){var t=e.$wrapper.find('img[data-loaded="false"]');t.each(function(e,t){if($(window).scrollTop()-100<$(t).offset().top&&$(t).offset().top+$(t).outerHeight()<$(window).innerHeight()+$(window).scrollTop()+100){var i=$(t).attr("data-src"),a=$(t).attr("data-width"),n=$(t).attr("data-height");try{i=utils.webp(i,{w:a,h:n})}catch(s){}$(t).attr({src:i,"data-loaded":!0}),$(t).removeAttr("data-src").removeAttr("data-width").removeAttr("data-height")}})},200)})},getUnloadedImg:function(){this.unLoadedImgArr=this.$wrapper.find('img[data-loaded="false"]')},reinit:function(){$(window).scroll()}};b.init();var k=function(e,t,i,a){var n=url("?")||{};if(n)for(var s in n)"keyword"!=s&&delete n[s];var l,o="";if(1==arguments.length)l=e+commonUtils.objToEncodeStr(n);else{n[e]=t;var r=i?location.pathname.split("/").slice(0,-1).join("/")+"/"+i:location.pathname;l=r+commonUtils.objToEncodeStr(n)}"suggest"===a&&(o="&from_source=web_suggest"),window.location.href="//"+location.host+l+o},_=function(){function e(e){e.preventDefault();var t=!("block"!=$(".bilibili-suggest").css("display")||!$(".vertical-text").hasClass("focus"));if(t)return!1;var i=$(this).parents(".logo-input").find("input").val().replace(/[<>]/gi,"").replace(/^\s*/,""),a=new RegExp("^av[0-9]+$","i");return i?a.test(i)?(k("keyword",i,"video"),!1):(SearchHistory.save(o(i)),void k("keyword",i)):(window.location.href="//search.bilibili.com",!1)}function t(e){e.preventDefault();var t=$(this).data("href");k(t)}function i(){n.button.click(e),n.input.keydown(function(t){13==t.keyCode&&e.call(this,t)}),n.tag.click(t),a=url("?")?url("?").keyword:null}var a,n={button:$("#search-button,.loupe"),tag:$(".nav-sub .sub"),input:$(".input-wrap input")};return{init:i}}(),C=function(){function e(){a.defaultSource=a.defaultSource(),a.static_val.hotwords=a.static_val.hotwords(),t=$("#search-keyword").bilibiliSuggestion(a);$(".bilibili-suggest").on("click",".fake-a",function(e){e.preventDefault();var t=$(this).data("target"),i=$(this).data("href"),a=$(this).data("value"),n="";$(this).hasClass("keyword")&&(n="suggest"),"blank"==t?window.open(i):k("keyword",a,"",n)}).on("mouseenter",".accurate-wrap",function(e){e.preventDefault(),$(this).find(".more").hasClass("js-hasmore")&&$(this).addClass("active").siblings(".accurate-wrap").removeClass("active").css("background","#fff").find(".js-hasmore").hide()})}var t,i="",a={container:'<div class="bilibili-suggest"></div>',appendTo:"#search-block>.input-wrap",position:{top:"100%",left:0},source:function(e,t){var a=$.trim(e.term),n={func:"suggest",suggest_type:suggestionOpt.suggestType,sub_type:suggestionOpt.subType,main_ver:"v1",highlight:"",userid:window.uid||0,bangumi_acc_num:1,special_acc_num:1,upuser_acc_num:3,topic_acc_num:1,tag_num:10,special_num:10,bangumi_num:10,upuser_num:3,term:a,rnd:Math.random()};"a"==$.cookie("abtest_suggest")&&$.extend(!0,n,{abtest:$.cookie("abtest_suggest")}),$.getJSON(search_utils.main_url+"/main/suggest?jsoncallback=?",n,function(e){e.result?(i=e.stoken,t(e.result)):t(null)})},defaultSource:function(){for(var e=SearchHistory.read(),t=0,i=e.length;i>t;++t)e[t].value=o(e[t].value);return 0!=e.length?e:utils.localStorage.getItem("hotword")?utils.localStorage.getItem("hotword").split(","):null},search:function(){var e=$.trim(this.value);return this.value&&!e||e.charCodeAt(0)<255&&e.length<1||e.length>40?!1:void 0},css:{marginTop:"5px"},renderMenu:function(e,t){var i=this;if($.isArray(t)){var n=SearchHistory.history.length;if(n){var s=e.append('<div class="hot-wrap_tag"></div>').find(".hot-wrap_tag");$.each(a.static_val.hotwords,function(e,t){if(t){var a={name:t,index:e+1};a.TYPE="hotword_tag",i._renderItem(s,a)}});var l=e.append('<div class="history-wrap"><div class="title"><span>搜索历史</span></div><a href="javascript:;" class="clearall">清空搜索历史</a></div>').find(".history-wrap");return $.each(t,function(e,t){if(t.isHistory){if(suggestionOpt.historyLen&&e>=suggestionOpt.historyLen)return}else delete t.url;t.TYPE="history",t.index=e+1,i._renderItem(l,t)}),void l.find(".clearall").mousedown(function(e){return e.stopImmediatePropagation(),SearchHistory.clear(),i._initSource("defaultSource"),$("#search-keyword").focus(),!1})}var o=e.append('<div class="hot-wrap_list"><div class="title"><span>热搜榜</span></div></div>').find(".hot-wrap_list");return void $.each(a.static_val.hotwords,function(e,t){if(t){var a={name:t,index:e+1};a.TYPE="hotword_list",i._renderItem(o,a)}})}var r=0;if(t.tag){var c=e.append('<div class="keyword-wrap"><div class="title"><span>关键字</span></div></div>').find(".keyword-wrap");$.each(t.tag,function(e,t){t&&(t.TYPE="keyword",t.index=e+1,i._renderItem(c,t),r++)}),rec_rp("show","showSuggest",!0),window.reportMsgObj.showSuggest={mid:window.UserStatus.isLogin()?$.cookie("DedeUserID"):"",keyword:encodeURI(url("?keyword"))}}0==r&&this.close()},select:function(e,t){var a=window.UserStatus&&window.UserStatus.status(),n="",s=t.item.TYPE;n="hotword_tag"===s?"hotword":"history"===s?"history":"sug",rec_rp("clickSug",{seid:i,buvid:$.cookie("buvid3")||"",mid:a&&a.mid||"",pos:t.item.index,keyword:t.item.value||t.item.name,type:n}),k("keyword",t.item.value)},static_val:{accurate_type:{upuser:"UP主",bangumi:"番剧",special:"专题",pgc:"影视"},hotwords:function(){return utils.localStorage.getItem("hotword")?utils.localStorage.getItem("hotword").split(","):[]},accurate_tpl:['<div class="accurate-wrap fake-a" data-href="{url}" data-target="blank">','<p class="vertical-text accurate "><span class="type">{type}</span>{title}</p>'].join(""),keyword_tpl:'<p data-href="{url}" class="vertical-text keyword fake-a" se-linkid="sug_keyword_{index}">{title}</p>',history_tpl:'<p data-href="{url}" class="vertical-text history fake-a" se-linkid="sug_history_{index}">{title}<i class="clear"></i></p>',hotword_list_tpl:'<a href="{url}" class="vertical-text hot" se-linkid="sug_hotList_{index}"><span class="rank">{index}</span>{title}</a>',hotword_tag_tpl:'<a href="{url}"><span class="tag" se-linkid="sug_hotTag_{index}">{title}</span></a>'},renderItem:function(e,i){var n=a.renderItemType[i.TYPE](i),s=this,l=$(n).attr("data-value",i.value).appendTo(e);return"history"==i.TYPE&&l.find("i").click(function(e){e.stopImmediatePropagation(),SearchHistory.remove(i.value);for(var a=SearchHistory.read(),n=0,l=a.length;l>n;++n)a[n].value=o(a[n].value);return 0!=a.length?s.options.defaultSource=a:s.options.defaultSource=utils.localStorage.getItem("hotword")?utils.localStorage.getItem("hotword").split(","):null,s._initSource("defaultSource"),$(this).parent().remove(),SearchHistory.history.length||(t.close(),$("#search-keyword").focus()),!1}),l},renderItemType:{accurate:function(e){var t=a.static_val.accurate_tpl,i=new Date(1e3*e.starttime).getFullYear(),n=e.isbangumi_end?"(共"+e.newep+"话)":"更新至第"+e.newep+"话";n=e.newep?n:"";var s=e.isbangumi_end?"已完结"+n:n,l=e.styles?e.styles.split(",").slice(0,2).join("/"):"",o=e.description?!1:"暂无信息";return t+="bangumi"==e.type||"pgc"==e.type?['<div class="more {hasmore}">','   <p class="titles">','      <span class="date">{year}</span>','      <span class="status">{status}</span>','      <span class="tag">{styles}</span>',"    </p>",'   <p class="detail">{detail}</p>',"</div></div>"].join("").replace(/\{hasmore\}/,"js-hasmore").replace(/\{year\}/,i||"").replace(/\{status\}/,s).replace(/\{styles\}/,l).replace(/\{detail\}/,o||e.description):"</div>".replace(/\{hasmore\}/,""),t.replace(/\{title\}/,e.name).replace(/\{url\}/,e.url).replace(/\{type\}/,a.static_val.accurate_type[e.type])},keyword:function(e){return a.static_val.keyword_tpl.replace(/\{title\}/,e.name).replace(/\{url\}/,location.pathname+"?keyword="+e.value).replace(/\{index\}/,e.index)},history:function(e){return a.static_val.history_tpl.replace(/\{title\}/,commonUtils.subString(e.value,40)).replace(/\{url\}/,location.pathname+"?keyword="+e.value).replace(/\{index\}/,e.index)},hotword_list:function(e){return a.static_val.hotword_list_tpl.replace(/\{title\}/,e.name).replace(/\{index\}/gi,e.index).replace(/\{url\}/,"/all?keyword="+e.name)},hotword_tag:function(e){return a.static_val.hotword_tag_tpl.replace(/\{title\}/,e.name).replace(/\{url\}/,location.pathname+"?keyword="+e.name).replace(/\{index\}/gi,e.index)}}};return{init:e}}(),S=function(){function e(){commonUtils.ajax(search_utils.main_url+"/main/hotword",function(e){var t=[];e.list&&e.list.length>0&&$.each(e.list,function(e,i){return t.push(i.keyword),e>=9?!1:void 0}),utils.saveToLocal("hotword",t.join(",")),C.init()})}return{init:e}}();S.init(),_.init(),loadLoginStatus(),y.init(),"pgc"==commonUtils.whereImI()?c.init():"live"==commonUtils.whereImI(),onLoginInfoLoaded(function(e){"all"==commonUtils.whereImI()?e.isLogin?(w.init(),g.init("synthetical-up")):(w.unLoginInit(),$(".synthetical-up").on("click",".js-attention-user",function(){biliQuickLogin(function(){location.reload()})})):"upuser"==commonUtils.whereImI()&&(e.isLogin?g.init("ajax-render"):$(".ajax-render").on("click",".js-attention-user",function(){biliQuickLogin(function(){location.reload()})}))});var x=function(){function e(e){g.helpful=e,a()}function t(e){g.supplement=e,a()}function i(){return!!(200>=w&&(g.helpful||g.supplement))}function a(){i()?f.addClass("active"):f.removeClass("active")}function n(){e(""),t(""),w=0,h.empty(),h.remove()}function s(){var e='<div id="feedback" class="feedback-mask"><div class="content"><i id="fbCloseBtn" class="icon-del"></i><h3 class="headline">搜索结果反馈</h3><div class="feedback-body"><dl class="dl-item"><dt class="dt-item">您觉得这个搜索结果</dt><dd class="dd-item"><label><input type="radio" value="yes" name="helpful" class="helpful"><i class="radio-icon"></i>有用</label></dd><dd class="dd-item"><label><input type="radio" value="no" name="helpful" class="helpful"><i class="radio-icon"></i>无用</label></dd></dl><dl class="dl-item"><dt class="dt-item">其它补充</dt><dd class="dd-item"><textarea name="" class="supplement"></textarea><div class="num-prompt"><span id="supplementNum">0</span>/200</div><span id="supplementError"><i class="icon-attention"></i>已经满200字啦</span></dd></dl><div class="feedback-submit">提交</div></div></div></div>';$(e).appendTo($("body")),h=$("#feedback"),f=$(".feedback-submit"),p=$("#supplementError"),m=$("#supplementNum"),v=$("#fbCloseBtn"),h.show()}function l(){var t=$("#feedback .helpful");t.on("change",function(){for(var i=0;i<t.length;i++)if(t[i].checked){e(t[i].value);break}})}function o(){$(".supplement").on("keyup input",function(){var e=$(this).val(),i=0;i=e?e.length:0,w=i,m.html(i),e.length>200?(m.addClass("error"),p.show()):(m.removeClass("error"),p.hide()),t(e)})}function r(e){$(".feedback-submit").on("click",function(){if($(this).hasClass("active")){if(!i())return;var t=$(e).attr("lnk-subtype"),a={linkid:"submit_feedback",msg:JSON.stringify(g),linktype:t?t:"upuser",trackid:$("body").attr("data-trackid_special")};rec_rp("search_click",a),window.reportMsgObj.search_click={linkid:"submit_feedback",linktype:t?t:"upuser",msg:JSON.stringify(g)},n(),d()}})}function c(){v.on("click",function(){n()})}function d(){$('<div class="fb-success-prompt">感谢反馈</div>').appendTo($("body")).fadeIn("normal",function(){var e=$(this);setTimeout(function(){e.fadeOut("normal",function(){$(this).empty().remove()})},1500)})}function u(e){s(),l(),o(),r(e),c()}var h,f,p,m,v,g={helpful:"",supplement:""},w=0;return{init:u}}();$("body").on("click",".up-fb-btn",function(){x.init(this)})}),$(function(){function e(){"function"==typeof window.biliQuickLogin?window.biliQuickLogin(function(){window.location.reload()}):$.getScript("https://static.hdslb.com/account/bili_quick_login.js",function(){window.biliQuickLogin(function(){window.location.reload()})})}function t(e,t,i){clearTimeout(s),$("body .search-global-hint").remove();var a=$('<div class="search-global-hint">'+t+"</div>");$("body").append(a);var n=$(e).offset().left-(a.outerWidth()-$(e).outerWidth())/2,l=$(e).offset().top-$(e).height()-8;a.css({top:l,left:n}).fadeIn(),i&&(s=setTimeout(function(){a.fadeOut()},i))}function i(){$("body .search-global-hint").remove()}function a(e){return $.ajax({url:"//api.bilibili.com/x/v2/history/toview/add",type:"POST",data:{aid:e,jsonp:"jsonp"},dataType:"json",xhrFields:{withCredentials:!0}})}function n(e){return $.ajax({url:"//api.bilibili.com/x/v2/history/toview/del",type:"POST",data:{aid:e,jsonp:"jsonp"},dataType:"json",xhrFields:{withCredentials:!0}})}var s=null;$("body").on("click",".search-watch-later",function(i){i.stopPropagation(),i.preventDefault();var s=$(this),l=$("body").attr("data-trackid"),o=s.attr("data-aid"),r=s.attr("data-uid");window.UserStatus&&window.UserStatus.isLogin()?s.hasClass("icon-later-on")?(rec_rp("search_click",{trackid:l,linktype:"watchlater_cancel",linkid:r?"up_"+r+"_video_"+o:"video_"+o,linkurl:s.parents("a:eq(0)").attr("href")}),n(o).done(function(e){0===e.code?(s.removeClass("icon-later-on").addClass("icon-later-off"),t(s,"已从稍后再看列表中移除",1500)):t(s,e.message,1500)}).fail(function(){t(s,"操作失败，请重试",1500)})):(rec_rp("search_click",{trackid:l,linktype:"watchlater_add",linkid:r?"up_"+r+"_video_"+o:"video_"+o,linkurl:s.parents("a:eq(0)").attr("href")}),a(o).done(function(e){0===e.code?(s.removeClass("icon-later-off").addClass("icon-later-on"),t(s,"已加稍后再看",1500)):t(s,e.message,1500)}).fail(function(){t(s,"添加失败，请重试",1500)})):e()}).on("mouseover",".search-watch-later",function(){var e=$(this).hasClass("icon-later-on")?"移除":"稍后再看";t($(this),e)}).on("mouseleave",".search-watch-later",function(){i()})}),$(function(){var e=$(".so-wrap").find(".act-card-wrap");e.on("click",".see-more",function(t){e.find(".act-last").show(),$(this).hide()})}),$(function(){function e(e,a){var n="/card",s=encodeURI("/ajax_api/"+n.split("/").slice(-1).toString().toLowerCase()),l={};l._=(new Date).getTime(),l.search_type="card",l.keyword=e,$.ajax({url:s,dataType:"json",data:l}).then(function(e){var n=e.html;i.html(n),t(a);var s=i.find(".card-wrap").attr("data-trackid");$("body").attr("data-trackid_special",s)})}function t(e){var t=e.siblings(".active").data("cardid"),i=e.data("cardid"),n="videocard_season_"+t+"_"+i,s=void 0==e.attr("title")?"":e.attr("title"),l="videocard",o=$("body").attr("data-trackid_special"),r=window.UserStatus&&window.UserStatus.status();rec_rp("search_click",{linkid:n,linktitle:s,linktype:l,trackid:o,keyword:a}),window.reportMsgObj.search_click={linkid:n,linktitle:s,mid:r&&r.mid||0,linktype:l,trackid:o}}var i=$(".synthetical-card"),a=$("body").data("keyword");i.length&&(i.on("click",".videos",function(e){var t=$(e.target||e.srcElement);t.hasClass("open")?(t.parents(".video-part").hide(),t.parents(".video-part").siblings(".video-all").show()):t.hasClass("close")&&(t.parents(".video-all").hide(),t.parents(".video-all").siblings(".video-part").show())}),i.on("click",".seasons",function(t){var i=$(t.target||t.srcElement);if(i.hasClass("season")){var a=$(".cardhead").find(".title").attr("title")+" "+i.text();e(a,i),i.siblings().removeClass("active"),i.addClass("active")}}))});